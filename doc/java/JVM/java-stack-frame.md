## 栈帧

1.  Java虚拟机以方法作为最基本的执行单位
2.  栈帧用于支持虚拟机进行方法调用和方法执行背后的数据结构,也是虚拟机运行时数据区中的虚拟机栈的栈元素
3.  栈帧中存储了**方法的局部变量表,操作数栈,动态连接,方法返回地址和一些额外的附加信息**
4.  在活动线程中,只有位于栈顶的方法才是在运行的,只有位于栈顶的栈帧才是生效的,称为"**当前栈帧**",与这个栈帧所关联的方法称为"**当前方法**"
5.  栈帧结构
    1.  局部变量表
        1.  是一组变量值的存储空间,用于存放方法参数和方法内部定义的局部变量
        2.  以变量槽为最小单位
        3.  在编译为Class文件时,就在方法的Code属性的max_locals数据项中确定了该方法所需分配的局部变量表的最大容量
        4.  如果执行的是实例方法(没有被static修饰的方法),局部变量表的第0位缩影的变量槽默认是用于传递方法所属对象实例的引用,在方法中可以通过关键字"this"来访问这个隐含的参数
    2.  操作数栈(操作栈)
        1.  后入先出栈
        2.  操作数栈的最大深度在编译时被写入到Code属性的max_stacks数据项中
    3.  动态连接
    4.  方法返回地址
        1.  正常调用返回
        2.  异常调用返回,这种方式退出不会给上层调用者提供任何返回值
    5.  附加信息
        1.  《Java虚拟机规范》允许虚拟机实现增加一些规范中没有描述的信息到栈帧中

